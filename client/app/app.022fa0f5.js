"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}angular.module("anyclipDemoApp",["anyclipDemoApp.constants","ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap","vjs.video","jlareau.pnotify"]).config(["$routeProvider","$locationProvider",function(a,b){a.otherwise({redirectTo:"/videos"}),b.html5Mode(!0)}]),angular.module("anyclipDemoApp.util",[]),angular.module("anyclipDemoApp").config(["$routeProvider",function(a){a.when("/videos",{template:"<videos></videos>"})}]),angular.module("anyclipDemoApp").constant("appApi",{VIDEO:"/api/videos",COMMENTS_BY_VIDEO:"api/comments/video",RATING_BY_VIDEO:"api/ratings/video",RATING:"/api/ratings",COMMENT:"/api/comments"}),angular.module("anyclipDemoApp").service("ratingService",["$http","appApi",function(a,b){var c,d=null;return c={addVideoRating:function(c){return d=a.post(b.RATING,c).then(function(a){return a.data})},getVideoRating:function(c){return d=a.get(b.RATING_BY_VIDEO+"/"+c).then(function(a){return a.data})}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.videoId=e.videoId,this.videosService=b,this.ratingService=c,this.commentsService=d,this.$location=f,this.mediaObject={}}return a.$inject=["videosService","ratingService","commentsService","$routeParams","$location"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.videosService.getVideoData(this.videoId).then(function(b){a.ratingService.getVideoRating(a.videoId).then(function(b){a.avgVideoRating=b[0].rateAvg})["catch"](function(a){}),a.commentsService.getCommentsByVideo(a.videoId).then(function(b){a.comments=b})["catch"](function(a){}),a.video=b,a.mediaObj={sources:[{src:a.video.videoLink,type:"video/mp4"}],poster:a.video.thumbnailUrl}})["catch"](function(b){a.$location.url("/videos")})}}]),a}();angular.module("anyclipDemoApp").component("videoDetails",{templateUrl:"app/video-details/video-details.html",controller:a,controllerAs:"VideoDetialCtrl"})}(),angular.module("anyclipDemoApp").config(["$routeProvider",function(a){a.when("/videos/:videoId",{template:"<video-details></video-details>"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.videos=[],this.videosService=b,this.ratingService=c,this.commentsService=d,this.$location=e,this.notificationService=f}return a.$inject=["videosService","ratingService","commentsService","$location","notificationService"],_createClass(a,[{key:"$onInit",value:function(){function a(a,b){return a.avgRating<b.avgRating?1:a.avgRating>b.avgRating?-1:0}var b=this;b.videos=this.videosService.getAllVideos();var c=0;b.videos.forEach(function(d){b.ratingService.getVideoRating(d._id).then(function(e){d.avgRating=e[0].rateAvg,c++,c===b.videos.length&&(b.videos=b.videos.sort(a),b.videoSelected(b.videos[0]))})})}},{key:"rateVideo",value:function(a){var b=this;this.rate=a;var c={rate:a,videoId:this.selectedVideo._id};this.ratingService.addVideoRating(c).then(function(a){b.notificationService.success("Your Rating has been saved  \n Thank You :)"),b.ratingService.getVideoRating(b.selectedVideo._id).then(function(a){b.selectedVideo.avgRating=a[0].rateAvg})})["catch"](function(a){b.notificationService.error("Oops .. \n Something Wrong happen \n Please try again later  \n Thank You :)")})}},{key:"commentVideo",value:function(a){var b=this,c={text:a,videoId:this.selectedVideo._id};this.commentsService.addVideoComment(c).then(function(a){b.notificationService.success("Your comment has been saved  \n Thank You :)")})["catch"](function(a){b.notificationService.error("Oops .. \n Something Wrong happen \n Please try again later  \n Thank You :)")})}},{key:"videoSelected",value:function(a){this.selectedVideo=a,this.mediaObj={sources:[{src:this.selectedVideo.videoLink,type:"video/mp4"}],poster:this.selectedVideo.thumbnailUrl}}},{key:"navToSelectedVideo",value:function(){this.$location.url("videos/"+this.selectedVideo._id)}}]),a}();angular.module("anyclipDemoApp").component("videos",{templateUrl:"app/videos/videos.html",controller:a,controllerAs:"VideosCtrl"})}(),angular.module("anyclipDemoApp").service("commentsService",["$http","appApi",function(a,b){var c,d=null;return c={addVideoComment:function(c){return d=a.post(b.COMMENT,c).then(function(a){return a.data})},getCommentsByVideo:function(c){return d=a.get(b.COMMENTS_BY_VIDEO+"/"+c).then(function(a){return a.data})}}}]),angular.module("anyclipDemoApp").service("videosService",["$http","appApi",function(a,b){var c,d=null;return c={getAllVideos:function(){return[{_id:"5704cd288a0c366596518825",title:"The Matrix",description:"Really Nice Movie",createdAt:"1.1.2016",videoLink:"http://vjs.zencdn.net/v/oceans.mp4",thumbnailUrl:"http://vjs.zencdn.net/v/oceans.png"},{_id:"5704dd6d8a0c366596518826",title:"Jungle - Live ! ",description:"Best Show In Bonarro Festival !",createdAt:"1.1.2016",videoLink:"http://static.videogular.com/assets/videos/videogular.mp4",thumbnailUrl:"http://www.videogular.com/assets/images/videogular.png"},{_id:"57055d5f8a0c366596518827",videoLink:"http://html5videoformatconverter.com/data/images/happyfit2.mp4",title:"Sky Fall",description:"Very Cool Movie",thumbnailUrl:"http://html5videoformatconverter.com/data/images/screen.jpg"}]},getVideoData:function(c){return d=a.get(b.VIDEO+"/"+c).then(function(a){return a.data})}}}]),angular.module("anyclipDemoApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(a,b){b.addClass("footer")}}}),angular.module("anyclipDemoApp").factory("Modal",["$rootScope","$uibModal",function(a,b){function c(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments.length<=1||void 0===arguments[1]?"modal-default":arguments[1],e=a.$new();return angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(){var a=arguments.length<=0||void 0===arguments[0]?angular.noop:arguments[0];return function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),NavbarController=function(){function a(b){_classCallCheck(this,a),this.isCollapsed=!0,this.$location=b}return a.$inject=["$location"],_createClass(a,[{key:"isActive",value:function(a){return a===this.$location.path()}}]),a}();angular.module("anyclipDemoApp").controller("NavbarController",NavbarController),angular.module("anyclipDemoApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:"NavbarController",controllerAs:"nav"}}),function(a,b){a.module("anyclipDemoApp.constants",[]).constant("appConfig",{userRoles:["guest","user","admin"]})}(angular),function(){function a(a){var b={safeCb:function(a){return angular.isFunction(a)?a:angular.noop},urlParse:function(a){var b=document.createElement("a");return b.href=a,""===b.host&&(b.href=b.href),b},isSameOrigin:function(c,d){return c=b.urlParse(c),d=d&&[].concat(d)||[],d=d.map(b.urlParse),d.push(a.location),d=d.filter(function(a){return c.hostname===a.hostname&&c.port===a.port&&c.protocol===a.protocol}),d.length>=1}};return b}a.$inject=["$window"],angular.module("anyclipDemoApp.util").factory("Util",a)}(),angular.module("anyclipDemoApp").run(["$templateCache",function(a){a.put("app/video-details/video-details.html",'<div class=row><div class=col-md-9><div class=row><div class=col-xs-12><video style="width: 100%" vjs-video vjs-media=VideoDetialCtrl.mediaObj class="video-js vjs-default-skin" controls preload=auto poster=poster.jpg></video></div></div><div class="row video-comments-row"><div class="col-md-8 col-md-offset-2"><h3>Comments :</h3><div ng-repeat="comment in VideoDetialCtrl.comments | orderBy : \'createdAt\': true" class=video-comment><div class=comment-text><div ng-bind=comment.text></div></div><div class=comment-date><div ng-bind="comment.createdAt | date : \'short\'"></div></div></div></div></div></div><div class=col-md-3><form><div class=form-group><label>Title</label><p ng-bind=VideoDetialCtrl.video.title></p></div><div class=form-group><label>Description</label><p ng-bind=VideoDetialCtrl.video.description></p></div><div class=form-group><label>Thumbnail Image</label><img class=img-thumbnail ng-src={{VideoDetialCtrl.video.thumbnailUrl}}></div><div class=form-group><label>Type</label><p>Movie</p></div><div class=form-group><label>Duration</label><p>1h 55m</p></div><div class=form-group><label>Rating</label><p ng-bind=VideoDetialCtrl.avgVideoRating.toFixed(2)></p></div><div class=form-group><label>Added At</label><p ng-bind="VideoDetialCtrl.video.createdAt | date : \'short\'"></p></div></form></div></div>'),a.put("app/videos/videos.html",'<div class=row><div class=col-md-9><div class=row><div class=col-xs-12><video style="width: 100%" vjs-video vjs-media=VideosCtrl.mediaObj class="video-js vjs-default-skin" autoplay controls preload=auto poster=poster.jpg></video></div></div><div class="row video-info-row"><div class=col-md-3><span>Rating : <span style="font-weight: bold">{{VideosCtrl.selectedVideo.avgRating.toFixed(2)}}</span></span></div><div class=col-md-9><div class=video-rating-wrapper><span style="margin-right: 15px">Rate the video</span><div class=btn-group role=group aria-label="Rate This Video"><button ng-class="{\'btn-primary\' : VideosCtrl.rate === i}" ng-repeat="i in [1, 2, 3, 4, 5]" ng-click=VideosCtrl.rateVideo(i) type=button class="btn btn-default">{{i}}</button></div></div></div></div><div class="row comments-row"><form name=commentsForm class="form form-inline" novalidate><div class="form-group col-md-12"><label class=col-md-3 for=exampleInputName2>Leave Comment</label><div class="col-md-9 comments-textarea-wrapper"><textarea name=commentText ng-model=commentText type=text class=form-control id=exampleInputName2 placeholder="Enter You Comment" required></textarea></div></div><div class="col-md-12 actions-row"><button ng-click=VideosCtrl.navToSelectedVideo() id=browse-video-cta type=button class="btn btn-default">Detailed information about the video</button> <button ng-disabled=commentsForm.$invalid ng-click=VideosCtrl.commentVideo(commentText) id=save-comment-cta type=submit class="btn btn-primary">Save Comment</button></div></form></div></div><div class=col-md-3><div class=video-thumb-side-menu><div ng-click=VideosCtrl.videoSelected(video) ng-repeat="video in VideosCtrl.videos | orderBy : \'avgRating\' : true" class=video-thumb><img class=img-thumbnail ng-src={{video.thumbnailUrl}}><p ng-bind=video.title></p></div></div></div></div>'),a.put("components/footer/footer.html",'<div class=container><p>Angular Fullstack v3.5.0 | <a href=https://twitter.com/tyhenkel>@tyhenkel</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarController><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="nav.isCollapsed = !nav.isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=/ class=navbar-brand>anyclip-demo</a></div><div uib-collapse=nav.isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in nav.menu" ng-class="{active: nav.isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);